<!DOCTYPE html>
<html>
<head>
<title>Hiragana Flashcard</title>

<meta name="viewport"
content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<script src="https://cdn.tailwindcss.com"></script>

<style>
html, body {
  height: 100%;
}
.perspective { perspective: 1400px; }

.card-inner {
  transform-style: preserve-3d;
  transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
}

.card.flip .card-inner { transform: rotateY(180deg); }

.card-face { backface-visibility: hidden; }

.card-back { transform: rotateY(180deg); }
</style>
</head>

<body class="bg-gradient-to-b from-purple-600 to-indigo-700 text-white min-h-screen flex flex-col">

<!-- HEADER -->
<header class="px-6 pt-8 pb-4">
  <h1 class="text-2xl font-bold tracking-wide">
    Hiragana
  </h1>
</header>

<!-- MAIN -->
<main class="flex-1 flex flex-col justify-between px-4">

<!-- CARD AREA -->
<div class="flex-1 flex items-center justify-center">

<div class="perspective w-full flex justify-center">

  <div id="flashCard"
    class="card w-full max-w-xl
           h-[60vh] sm:h-[500px]
           cursor-pointer">

    <div class="card-inner w-full h-full relative">

      <!-- FRONT -->
      <div class="card-face absolute w-full h-full
                  bg-white text-black
                  rounded-3xl shadow-2xl
                  flex items-center justify-center">

        <span id="frontText"
          class="text-[24vw] sm:text-9xl font-bold">
        </span>

      </div>

      <!-- BACK -->
      <div class="card-face card-back absolute w-full h-full
                  bg-gradient-to-br from-purple-500 to-indigo-600
                  rounded-3xl shadow-2xl
                  flex items-center justify-center">

        <span id="backText"
          class="text-[12vw] sm:text-6xl font-bold tracking-wide">
        </span>

      </div>

    </div>

  </div>

</div>
</div>

<!-- CONTROLS -->
<div class="pb-6 space-y-4">

<button onclick="prevKana()"
 class="w-full bg-white/20 backdrop-blur-md
        py-3 rounded-2xl
        text-lg font-semibold
        active:scale-95 transition">
â¬… Prev
</button>

<button id="shuffleBtn"
 onclick="toggleShuffle()"
 class="w-full bg-yellow-400 text-black
        py-3 rounded-2xl
        text-lg font-semibold
        active:scale-95 transition">
ðŸ”€ Shuffle
</button>

<button onclick="nextKana()"
 class="w-full bg-white text-purple-700
        py-3 rounded-2xl
        text-lg font-semibold
        active:scale-95 transition">
Next âž¡
</button>

</div>

</main>

<script type="module">
import { hiraganaData } from "./js/data/hiragana.js";

let originalData = [...hiraganaData];
let data = [...hiraganaData];
let index = 0;
let isShuffled = false;

const card = document.getElementById("flashCard");
const frontText = document.getElementById("frontText");
const backText = document.getElementById("backText");
const shuffleBtn = document.getElementById("shuffleBtn");

function render() {
  frontText.innerText = data[index].char;
  backText.innerText = data[index].romaji;
}

card.addEventListener("click", () => {
  card.classList.toggle("flip");
});

window.nextKana = function() {
  card.classList.remove("flip");
  index = (index + 1) % data.length;
  render();
};

window.prevKana = function() {
  card.classList.remove("flip");
  index = (index - 1 + data.length) % data.length;
  render();
};

window.toggleShuffle = function() {

  card.classList.remove("flip");

  if (!isShuffled) {
    data = shuffle([...data]);
    isShuffled = true;
    shuffleBtn.innerText = "ðŸ”€ Shuffle ON";
    shuffleBtn.classList.replace("bg-yellow-400","bg-green-400");
  } else {
    data = [...originalData];
    isShuffled = false;
    shuffleBtn.innerText = "ðŸ”€ Shuffle";
    shuffleBtn.classList.replace("bg-green-400","bg-yellow-400");
  }

  index = 0;
  render();
};

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

render();
</script>

</body>
</html>
